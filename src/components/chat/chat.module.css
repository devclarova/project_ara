/* ë£¨íŠ¸ë§Œ ëª¨ë“ˆ í´ë˜ìŠ¤, ë‚´ë¶€ëŠ” :globalë¡œ ë¸Œë¦¬ì§€ */
/* ì „ì—­ ì˜¤ì—¼ ë°©ì§€: ëª¨ë“  ê·œì¹™ì€ .chatPage ì•„ë˜ë¡œ ì œí•œ */
.chatPage {
  height: calc(100vh - 120px);
  display: flex;
  flex-direction: column;
  margin-top: 50px;
  margin-left: 30px;

  /* ì „ì²´ ë°°ê²½ì€ app background, ì»¨í…Œì´ë„ˆëŠ” secondary í†¤ */
  background-color: hsl(var(--background));
}

/* ì»¨í…Œì´ë„ˆ ê¸°ë³¸ í…Œë‘ë¦¬ + ë°°ê²½ */
.chatContainer {
  /* ëª¨ë“ˆ í´ë˜ìŠ¤(ë¶€ëª¨ì—ì„œ ì§ì ‘ ì‚¬ìš©) */
  display: flex;
  height: 100%;
  border: 1px solid hsl(var(--border));
  border-radius: 8px;
  overflow: hidden;
  background-color: hsl(var(--secondary));
}

/* ì‚¬ì´ë“œ/ë©”ì¸ */
.chatPage :global(.chat-sidebar) {
  width: 300px;
  border-right: 1px solid hsl(var(--border));
  background-color: hsl(var(--secondary));
  display: flex;
  flex-direction: column;
}

.chatPage :global(.chat-main) {
  flex: 1;
  display: flex;
  flex-direction: column;
  background-color: hsl(var(--secondary));
}

/* ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
.chatPage :global(.chat-list) {
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: hsl(var(--secondary));
  border-right: 1px solid hsl(var(--border));
}

.chatPage :global(.chat-list-header) {
  padding: 20px;
  border-bottom: 1px solid hsl(var(--border));
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: hsl(var(--secondary));
}

.chatPage :global(.chat-list-header h2) {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: hsl(var(--secondary-foreground));
}

/* ìƒˆ ì±„íŒ… ë²„íŠ¼ */
.chatPage :global(.new-chat-btn) {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  border: none;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  opacity: 0.9;
  transition: all 0.2s ease;
}
.chatPage :global(.new-chat-btn:hover) {
  opacity: 1;
}

/* ê²€ìƒ‰ */
.chatPage :global(.user-search) {
  padding: 16px;
  border-bottom: 1px solid hsl(var(--border));
  background-color: hsl(var(--secondary));
}
.chatPage :global(.search-input) {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid hsl(var(--border));
  border-radius: 4px;
  font-size: 14px;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
}
.chatPage :global(.search-input::placeholder) {
  color: hsl(var(--muted-foreground));
}
.chatPage :global(.search-result) {
  margin-top: 8px;
  max-height: 200px;
  overflow-y: auto;
}
.chatPage :global(.user-item) {
  display: flex;
  align-items: center;
  padding: 8px;
  cursor: pointer;
  border-radius: 4px;
  transition: all 0.2s;
  color: hsl(var(--secondary-foreground));
}
.chatPage :global(.user-item:hover) {
  background-color: color-mix(in srgb, hsl(var(--primary)) 10%, hsl(var(--secondary)) 90%);
}
.chatPage :global(.user-avatar) {
  margin-right: 12px;
}
.chatPage :global(.user-avatar img) {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}
.chatPage :global(.avatar-placeholder) {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 14px;
}
/* avatar-placeholder ì— hidden í´ë˜ìŠ¤ê°€ ë¶™ì–´ìˆìœ¼ë©´ ì§„ì§œ ìˆ¨ê¸°ê¸° */
.chatPage :global(.avatar-placeholder.hidden) {
  display: none !important;
}
.chatPage :global(.user-info) {
  display: block;
}
.chatPage :global(.user-nickname) {
  font-weight: 500;
  color: hsl(var(--secondary-foreground));
}
.chatPage :global(.no-results) {
  padding: 16px;
  text-align: center;
  color: hsl(var(--muted-foreground));
  font-size: 14px;
}

/* ì±„íŒ… ì•„ì´í…œ ëª©ë¡ */
.chatPage :global(.chat-items) {
  flex: 1;
  overflow-y: auto;
}
.chatPage :global(.no-chats) {
  padding: 32px 16px;
  text-align: center;
  color: hsl(var(--muted-foreground));
}
/* ğŸ’¬ ê° ì±„íŒ…ë°© ì‚¬ì´ í…Œë‘ë¦¬ */
.chatPage :global(.chat-item) {
  display: flex;
  align-items: center;
  padding: 18px 20px;
  cursor: pointer;
  border-bottom: 1px solid hsl(var(--border));
  transition: all 0.2s;
  background-color: hsl(var(--secondary));
}
.chatPage :global(.chat-item:hover) {
  background-color: color-mix(in srgb, hsl(var(--primary)) 6%, hsl(var(--secondary)) 94%);
}
.chatPage :global(.chat-item.selected) {
  background-color: color-mix(in srgb, hsl(var(--primary)) 10%, hsl(var(--secondary)) 90%);
  border-right: 3px solid hsl(var(--primary));
}
.chatPage :global(.chat-avatar) {
  position: relative;
  margin-right: 16px;
}
.chatPage :global(.chat-avatar img) {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid hsl(var(--border));
}
.chatPage :global(.chat-avatar .avatar-placeholder) {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 19px;
  border: 2px solid hsl(var(--border));
}
.chatPage :global(.unread-badge) {
  position: absolute;
  top: -2px;
  right: -2px;
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
}
.chatPage :global(.chat-info) {
  flex: 1;
  min-width: 0;
}
.chatPage :global(.chat-header) {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 4px;
}
.chatPage :global(.chat-name) {
  font-weight: 600;
  color: hsl(var(--secondary-foreground));
  font-size: 14px;
}
.chatPage :global(.chat-time) {
  font-size: 12px;
  color: hsl(var(--muted-foreground));
}
.chatPage :global(.chat-preview) {
  font-size: 13px;
  color: hsl(var(--muted-foreground));
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.chatPage :global(.chat-preview .unread) {
  font-weight: 600;
  color: hsl(var(--secondary-foreground));
}
.chatPage :global(.chat-preview .no-message) {
  font-style: italic;
  color: hsl(var(--muted-foreground));
}

/* í™˜ì˜ í™”ë©´ */
.chatPage :global(.chat-welcome) {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: hsl(var(--secondary));
}
.chatPage :global(.welcome-content) {
  text-align: center;
  color: hsl(var(--muted-foreground));
  max-width: 400px;
  padding: 32px;
}
.chatPage :global(.welcome-content h2) {
  margin-bottom: 16px;
  color: hsl(var(--secondary-foreground));
  font-size: 24px;
}
.chatPage :global(.feature-info) {
  margin-top: 24px;
  padding: 16px;
  background: hsl(var(--background));
  border-radius: 8px;
  border: 1px solid hsl(var(--border));
}
.chatPage :global(.feature-info p) {
  margin: 6px 0;
  font-size: 13px;
  color: hsl(var(--muted-foreground));
}

/* ì±„íŒ…ë°© */
.chatPage :global(.chat-room) {
  display: flex;
  flex-direction: column;
  height: 100%;
  /* ğŸ‘‰ ë©”ì¸ ì˜ì—­ ì•ˆìª½ ì„¸ë¡œ í…Œë‘ë¦¬ (ë¼ì´íŠ¸/ë‹¤í¬ ê³µí†µ) */
  border-left: 1px solid hsl(var(--border));
}

.chatPage :global(.chat-room-header) {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid hsl(var(--border));
  background-color: hsl(var(--secondary));
}
.chatPage :global(.chat-room-header-left) {
  display: flex;
  align-items: center;
  gap: 8px;
}
.chatPage :global(.chat-room-info h3) {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: hsl(var(--secondary-foreground));
}
.chatPage :global(.chat-room-actions) {
  display: flex;
  gap: 8px;
}

/* ğŸ“± ëª¨ë°”ì¼ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
.chatPage :global(.chat-room-back-btn) {
  width: 32px;
  height: 32px;
  border-radius: 9999px;
  border: none;
  background-color: transparent;
  color: hsl(var(--secondary-foreground));
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.2s ease;
}
.chatPage :global(.chat-room-back-btn:hover) {
  background-color: color-mix(in srgb, hsl(var(--primary)) 10%, transparent);
}

/* ë‚˜ê°€ê¸° ë²„íŠ¼ */
.chatPage :global(.exit-chat-btn) {
  padding: 8px 16px;
  background-color: #dc3545;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  opacity: 0.9;
  transition: all 0.2s;
}
.chatPage :global(.exit-chat-btn:hover) {
  opacity: 1;
}

/* ë©”ì‹œì§€ ì˜ì—­ */
.chatPage :global(.chat-room-message) {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  background-color: hsl(var(--secondary));
  /* ğŸ‘‰ í—¤ë”/ì…ë ¥ì°½ê³¼ë„ í…Œë‘ë¦¬ë¡œ ë¶„ë¦¬ */
  border-top: 1px solid hsl(var(--border));
  border-bottom: 1px solid hsl(var(--border));
}
.chatPage :global(.no-message) {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: hsl(var(--muted-foreground));
  text-align: center;
}
.chatPage :global(.no-message p) {
  margin: 8px 0;
  font-size: 14px;
}
.chatPage :global(.message-group) {
  margin-bottom: 24px;
}
.chatPage :global(.date-divider) {
  text-align: center;
  margin: 16px 0;
  position: relative;
}
.chatPage :global(.date-divider::before),
.chatPage :global(.date-divider::after) {
  content: '';
  position: absolute;
  display: block;
  top: 50%;
  width: 50%;
  height: 1px;
  background-color: hsl(var(--border));
  z-index: 1;
}
.chatPage :global(.date-divider::before) {
  left: 0;
}
.chatPage :global(.date-divider::after) {
  right: 0;
}
.chatPage :global(.date-divider span) {
  background-color: hsl(var(--secondary));
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  color: hsl(var(--muted-foreground));
  border: 1px solid hsl(var(--border));
  position: relative;
  z-index: 2;
}
.chatPage :global(.message-group-container) {
  position: relative;
  width: 100%;
  padding: 0 20px;
}

/* ê°œë³„ ë©”ì‹œì§€ */
.chatPage :global(.message-item) {
  display: flex;
  margin-bottom: 12px;
  gap: 8px;
}
.chatPage :global(.message-bubble) {
  position: relative;
  display: flex;
  flex-direction: column;
  max-width: 100%;
}
.chatPage :global(.message-bubble:hover .message-time) {
  opacity: 1;
}
.chatPage :global(.message-text) {
  padding: 8px 12px;
  border-radius: 18px;
  font-size: 14px;
  line-height: 1.4;
  word-wrap: break-word;
  position: relative;
}
.chatPage :global(.message-time) {
  font-size: 14px;
  color: hsl(var(--muted-foreground));
  margin-top: 4px;
  opacity: 0.7;
}

/* ë‚´ ë©”ì‹œì§€ (primary í†¤) */
.chatPage :global(.message-item.my-message) {
  display: flex;
  justify-content: flex-end;
  align-items: flex-end;
  max-width: 100%;
  gap: 8px;
}
.chatPage :global(.my-message .message-text) {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  border-bottom-right-radius: 4px;
}
.chatPage :global(.my-message .message-time) {
  text-align: right;
}

/* ìƒëŒ€ ë©”ì‹œì§€ (secondary í†¤ê³¼ ì–´ìš¸ë¦¬ê²Œ) */
.chatPage :global(.message-item.other-message) {
  display: flex;
  justify-content: flex-start;
  align-items: flex-end;
  margin-right: auto;
  max-width: 100%;
  gap: 8px;
}
.chatPage :global(.other-message .message-text) {
  background-color: color-mix(in srgb, hsl(var(--secondary)) 80%, hsl(var(--background)) 20%);
  color: hsl(var(--secondary-foreground));
  border-bottom-left-radius: 4px;
}
.chatPage :global(.other-message .message-time) {
  text-align: left;
}

/* ì•„ë°”íƒ€ */
.chatPage :global(.message-avatar) {
  flex-shrink: 0;
  margin: 0 4px;
}
.chatPage :global(.message-avatar img) {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}
.chatPage :global(.message-avatar .avatar-placeholder) {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  font-size: 12px;
  color: hsl(var(--primary-foreground));
  background-color: hsl(var(--primary));
}

/* ì…ë ¥ ì˜ì—­ */
.chatPage :global(.message-input) {
  border-top: 1px solid hsl(var(--border));
  background-color: hsl(var(--secondary));
  padding: 16px;
}
.chatPage :global(.message-form) {
  width: 100%;
}
.chatPage :global(.input-container) {
  display: flex;
  gap: 8px;
}
.chatPage :global(.message-textarea) {
  flex: 1;
  min-height: 40px;
  max-height: 120px;
  border: 1px solid hsl(var(--border));
  border-radius: 20px;
  resize: none;
  font-size: 14px;
  line-height: 1.4;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
}
.chatPage :global(.message-textarea::placeholder) {
  color: hsl(var(--muted-foreground));
}
.chatPage :global(.message-textarea:focus) {
  outline: none;
  border-color: hsl(var(--primary));
  box-shadow: 0 0 0 1px hsl(var(--primary));
}
.chatPage :global(.send-button) {
  width: 40px;
  height: 40px;
  border: none;
  border-radius: 50%;
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}
.chatPage :global(.send-button:hover:not(:disabled)) {
  filter: brightness(0.95);
}
.chatPage :global(.send-button:disabled) {
  background-color: hsl(var(--muted));
  color: hsl(var(--muted-foreground));
  cursor: not-allowed;
}

/* ë¡œë”© ìŠ¤í”¼ë„ˆ */
.chatPage :global(.loading-spinner) {
  width: 16px;
  height: 16px;
  border: 2px solid hsl(var(--primary-foreground));
  border-top: 2px solid transparent;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ì—ëŸ¬/ë¡œë”© ë©”ì‹œì§€ */
.chatPage :global(.error-message) {
  padding: 16px;
  text-align: center;
  color: #dc3545;
}
.chatPage :global(.error-message button) {
  margin-top: 8px;
  padding: 8px 16px;
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* ì‹œìŠ¤í…œ ë©”ì‹œì§€ */
.chatPage :global(.system-message) {
  display: flex;
  justify-content: center;
  margin: 10px 0;
}
.chatPage :global(.system-message-content) {
  background-color: hsl(var(--background));
  color: hsl(var(--muted-foreground));
  padding: 8px 16px;
  border-radius: 16px;
  font-size: 12px;
  font-style: italic;
  max-width: 80%;
  text-align: center;
}

/* ğŸ“± ì‚´ì§ë§Œ ë°˜ì‘í˜• ì—¬ë°± ì •ë¦¬ */
@media (max-width: 1024px) {
  .chatPage {
    margin-top: 16px;
    margin-left: 0;
    height: calc(100vh - 80px);
  }

  .chatContainer {
    margin: 0 8px 16px;
    border-radius: 8px;
  }
}

@media (max-width: 768px) {
  .chatPage {
    margin-top: 8px;
    margin-left: 0;
    height: calc(100vh - 72px);
  }

  .chatContainer {
    border-radius: 0;
    border-left: none;
    border-right: none;
    border-bottom: none;
    margin: 0;
  }

  .chatPage :global(.chat-sidebar) {
    width: 100%;
    max-height: 45vh;
    border-right: none;
  }

  .chatPage :global(.chat-main) {
    width: 100%;
    flex: 1;
  }

  /* ëª¨ë°”ì¼ì¼ ë•Œ ì•ˆìª½ ì„¸ë¡œ í…Œë‘ë¦¬ëŠ” chat-room ìª½ë§Œ ìœ ì§€ */
  .chatPage :global(.chat-room) {
    border-left: none;
  }
}

/* ğŸŒ ë¼ì´íŠ¸ëª¨ë“œ: ì•ˆìª½ ë¶„ë¦¬ì„  (ë¦¬ìŠ¤íŠ¸ | ë©”ì¸ ì‚¬ì´) */
.chatPage :global(.chat-sidebar) {
  border-right: 1px solid #e5e7eb; /* border-gray-200 */
}

/* ğŸŒ™ ë‹¤í¬ëª¨ë“œ: ì•ˆìª½ ë¶„ë¦¬ì„  */
:global(.dark) .chatPage :global(.chat-sidebar) {
  border-right: 1px solid #454545; /* border-gray-700 ì •ë„ */
}

/* ===========================
   ğŸ’¬ ì±„íŒ…ë°© ë‚´ë¶€ êµ¬ë¶„ì„  ê°•í™”
   - í—¤ë” / ë©”ì‹œì§€ ì˜ì—­ / ì…ë ¥ì°½ ì‚¬ì´
   =========================== */

/* ê³µí†µ: ì±„íŒ…ë°© ì»¬ëŸ¼ ìì²´ë¥¼ ì‚´ì§ ë°•ìŠ¤ì²˜ëŸ¼ ë³´ì´ê²Œ */
.chatPage :global(.chat-room) {
  border-left: 1px solid hsl(var(--border));
}

/* í—¤ë” ì•„ë˜ êµ¬ë¶„ì„  */
.chatPage :global(.chat-room-header) {
  border-bottom: 1px solid hsl(var(--border));
}

/* ë©”ì‹œì§€ ì˜ì—­ ìœ„/ì•„ë˜ êµ¬ë¶„ì„  */
.chatPage :global(.chat-room-message) {
  border-top: 1px solid hsl(var(--border));
  border-bottom: 1px solid hsl(var(--border));
}

/* ì…ë ¥ì°½ ìœ„ êµ¬ë¶„ì„  (ì´ë¯¸ ìˆì–´ë„ í•œ ë²ˆ ë” ë®ì–´ì“°ê¸°) */
.chatPage :global(.message-input) {
  border-top: 1px solid hsl(var(--border));
}

/* ğŸŒ™ ë‹¤í¬ ëª¨ë“œì—ì„œëŠ” ì„ ì„ ì¢€ ë” ë°ê²Œ í•´ì„œ í™•ì‹¤íˆ ë³´ì´ê²Œ */
:global(.dark) .chatPage :global(.chat-room),
:global(.dark) .chatPage :global(.chat-room-header),
:global(.dark) .chatPage :global(.chat-room-message),
:global(.dark) .chatPage :global(.message-input) {
  border-color: #4b5563; /* tailwind gray-600 ì •ë„ í†¤ */
}

/* ===========================
   ğŸ’¬ êµ¬ë¶„ì„  í†µí•© ê°•ì¡° (ë¦¬ìŠ¤íŠ¸/ë‚ ì§œ/ë°© ë‚´ë¶€)
   =========================== */

/* 1ï¸âƒ£ ë¦¬ìŠ¤íŠ¸ í—¤ë” ì•„ë˜ */
.chatPage :global(.chat-list-header) {
  border-bottom: 1px solid hsl(var(--border));
}
:global(.dark) .chatPage :global(.chat-list-header) {
  border-bottom: 1px solid #475569; /* gray-600 */
}

/* 2ï¸âƒ£ ì±„íŒ… ì•„ì´í…œ ì‚¬ì´ */
.chatPage :global(.chat-item) {
  border-bottom: 1px solid hsl(var(--border));
}
:global(.dark) .chatPage :global(.chat-item) {
  border-bottom: 1px solid #374151; /* gray-700 */
}

/* 3ï¸âƒ£ ì±„íŒ…ë°© ë‚´ë¶€ ë‚ ì§œ êµ¬ë¶„ì„  */
.chatPage :global(.date-divider::before),
.chatPage :global(.date-divider::after) {
  background-color: hsl(var(--border));
}
:global(.dark) .chatPage :global(.date-divider::before),
:global(.dark) .chatPage :global(.date-divider::after) {
  background-color: #4b5563; /* gray-600 */
}
.chatPage :global(.date-divider span) {
  border: 1px solid hsl(var(--border));
}
:global(.dark) .chatPage :global(.date-divider span) {
  border-color: #4b5563;
  background-color: #0f172a; /* dark bg tone */
}

/* 4ï¸âƒ£ ì±„íŒ…ë°© ì•ˆìª½ ìƒí•˜ ê²½ê³„ì„  */
.chatPage :global(.chat-room-header),
.chatPage :global(.chat-room-message),
.chatPage :global(.message-input) {
  border-color: hsl(var(--border));
}
:global(.dark) .chatPage :global(.chat-room-header),
:global(.dark) .chatPage :global(.chat-room-message),
:global(.dark) .chatPage :global(.message-input) {
  border-color: #475569; /* gray-600 */
}
